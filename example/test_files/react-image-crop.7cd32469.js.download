(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[77],{hzVQ:function(t,e,i){},sEdW:function(t,e,i){"use strict";i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return s}));var n=i("q1tI"),o=i.n(n);const r={x:0,y:0,width:0,height:0,unit:"px"},h=(t,e,i)=>Math.min(Math.max(t,e),i),a=(t,e)=>t===e||t.width===e.width&&t.height===e.height&&t.x===e.x&&t.y===e.y&&t.unit===e.unit;function s(t,e,i,n){const o=c(t,i,n);return t.width&&(o.height=o.width/e),t.height&&(o.width=o.height*e),o.y+o.height>n&&(o.height=n-o.y,o.width=o.height*e),o.x+o.width>i&&(o.width=i-o.x,o.height=o.width/e),"%"===t.unit?d(o,i,n):o}function d(t,e,i){return"%"===t.unit?{...r,...t,unit:"%"}:{unit:"%",x:t.x?t.x/e*100:0,y:t.y?t.y/i*100:0,width:t.width?t.width/e*100:0,height:t.height?t.height/i*100:0}}function c(t,e,i){return t.unit?"px"===t.unit?{...r,...t,unit:"px"}:{unit:"px",x:t.x?t.x*e/100:0,y:t.y?t.y*i/100:0,width:t.width?t.width*e/100:0,height:t.height?t.height*i/100:0}:{...r,...t,unit:"px"}}function l(t,e,i,n,o,r=0,h=0,a=n,s=o){const d={...t};let c=Math.min(r,n),l=Math.min(h,o),w=Math.min(a,n),g=Math.min(s,o);e&&(e>1?(c=h?h*e:c,l=c/e,w=a*e):(l=r?r/e:l,c=l*e,g=s/e)),d.y<0&&(d.height=Math.max(d.height+d.y,l),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,c),d.x=0);const p=n-(d.x+d.width);p<0&&(d.x=Math.min(d.x,n-c),d.width+=p);const u=o-(d.y+d.height);if(u<0&&(d.y=Math.min(d.y,o-l),d.height+=u),d.width<c&&(("sw"===i||"nw"==i)&&(d.x-=c-d.width),d.width=c),d.height<l&&(("nw"===i||"ne"==i)&&(d.y-=l-d.height),d.height=l),d.width>w&&(("sw"===i||"nw"==i)&&(d.x-=w-d.width),d.width=w),d.height>g&&(("nw"===i||"ne"==i)&&(d.y-=g-d.height),d.height=g),e){const t=d.width/d.height;if(t<e){const t=Math.max(d.width/e,l);("nw"===i||"ne"==i)&&(d.y-=t-d.height),d.height=t}else if(t>e){const t=Math.max(d.height*e,c);("sw"===i||"nw"==i)&&(d.x-=t-d.width),d.width=t}}return d}const w={capture:!0,passive:!1};let g=0;const p=class t extends n.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=Object(n.createRef)(),this.mediaRef=Object(n.createRef)(),this.initChangeCalled=!1,this.instanceId="rc-"+g++,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=t=>{const{crop:e,disabled:i}=this.props,n=this.getBox();if(!e)return;const o=c(e,n.width,n.height);if(i)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const r=t.target.dataset.ord,h=!!r;let a=t.clientX,s=t.clientY,d=o.x,l=o.y;if(r){const e=t.clientX-n.x,i=t.clientY-n.y;let h=0,c=0;"ne"===r||"e"==r?(h=e-(o.x+o.width),c=i-o.y,d=o.x,l=o.y+o.height):"se"===r||"s"===r?(h=e-(o.x+o.width),c=i-(o.y+o.height),d=o.x,l=o.y):"sw"===r||"w"==r?(h=e-o.x,c=i-(o.y+o.height),d=o.x+o.width,l=o.y):("nw"===r||"n"==r)&&(h=e-o.x,c=i-o.y,d=o.x+o.width,l=o.y+o.height),a=d+n.x+h,s=l+n.y+c}this.evData={startClientX:a,startClientY:s,startCropX:d,startCropY:l,clientX:t.clientX,clientY:t.clientY,isResize:h,ord:r},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=t=>{const{crop:e,disabled:i,locked:n,keepSelection:o,onChange:r}=this.props,h=this.getBox();if(i||n||o&&e)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=t.clientX-h.x,s=t.clientY-h.y,l={unit:"px",x:a,y:s,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:a,startCropY:s,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,r(c(l,h.width,h.height),d(l,h.width,h.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=t=>{const{crop:e,disabled:i,onChange:n,onDragStart:o}=this.props,r=this.getBox();if(i||!e||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,o&&o(t));const{evData:h}=this;let s;h.clientX=t.clientX,h.clientY=t.clientY,s=h.isResize?this.resizeCrop():this.dragCrop(),a(e,s)||n(c(s,r.width,r.height),d(s,r.width,r.height))},this.onComponentKeyDown=e=>{const{crop:i,disabled:n,onChange:o,onComplete:r}=this.props;if(n)return;const a=e.key;let s=!1;if(!i)return;const l=this.getBox(),w=this.makePixelCrop(l),g=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?t.nudgeStepLarge:e.shiftKey?t.nudgeStepMedium:t.nudgeStep;if("ArrowLeft"===a?(w.x-=g,s=!0):"ArrowRight"===a?(w.x+=g,s=!0):"ArrowUp"===a?(w.y-=g,s=!0):"ArrowDown"===a&&(w.y+=g,s=!0),s){e.cancelable&&e.preventDefault(),w.x=h(w.x,0,l.width-w.width),w.y=h(w.y,0,l.height-w.height);const t=c(w,l.width,l.height),i=d(w,l.width,l.height);o(t,i),r&&r(t,i)}},this.onHandlerKeyDown=(e,i)=>{const{aspect:n=0,crop:o,disabled:r,minWidth:h=0,minHeight:s=0,maxWidth:w,maxHeight:g,onChange:p,onComplete:u}=this.props,m=this.getBox();if(r||!o)return;if("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();const y=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?t.nudgeStepLarge:e.shiftKey?t.nudgeStepMedium:t.nudgeStep,x=l(function(t,e,i,n){const o={...t};return"ArrowLeft"===e?"nw"===n?(o.x-=i,o.y-=i,o.width+=i,o.height+=i):"w"===n?(o.x-=i,o.width+=i):"sw"===n?(o.x-=i,o.width+=i,o.height+=i):"ne"===n?(o.y+=i,o.width-=i,o.height-=i):"e"===n?o.width-=i:"se"===n&&(o.width-=i,o.height-=i):"ArrowRight"===e&&("nw"===n?(o.x+=i,o.y+=i,o.width-=i,o.height-=i):"w"===n?(o.x+=i,o.width-=i):"sw"===n?(o.x+=i,o.width-=i,o.height-=i):"ne"===n?(o.y-=i,o.width+=i,o.height+=i):"e"===n?o.width+=i:"se"===n&&(o.width+=i,o.height+=i)),"ArrowUp"===e?"nw"===n?(o.x-=i,o.y-=i,o.width+=i,o.height+=i):"n"===n?(o.y-=i,o.height+=i):"ne"===n?(o.y-=i,o.width+=i,o.height+=i):"sw"===n?(o.x+=i,o.width-=i,o.height-=i):"s"===n?o.height-=i:"se"===n&&(o.width-=i,o.height-=i):"ArrowDown"===e&&("nw"===n?(o.x+=i,o.y+=i,o.width-=i,o.height-=i):"n"===n?(o.y+=i,o.height-=i):"ne"===n?(o.y+=i,o.width-=i,o.height-=i):"sw"===n?(o.x-=i,o.width+=i,o.height+=i):"s"===n?o.height+=i:"se"===n&&(o.width+=i,o.height+=i)),o}(c(o,m.width,m.height),e.key,y,i),n,i,m.width,m.height,h,s,w,g);if(!a(o,x)){const t=d(x,m.width,m.height);p(x,t),u&&u(x,t)}},this.onDocPointerDone=t=>{const{crop:e,disabled:i,onComplete:n,onDragEnd:o}=this.props,r=this.getBox();this.unbindDocMove(),!i&&e&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,o&&o(t),n&&n(c(e,r.width,r.height),d(e,r.width,r.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var t;null==(t=this.componentRef.current)||t.scrollTo(0,0)}}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:e,y:i,width:n,height:o}=t.getBoundingClientRect();return{x:e,y:i,width:n,height:o}}componentDidUpdate(t){const{crop:e,onComplete:i}=this.props;if(i&&!t.crop&&e){const{width:t,height:n}=this.getBox();t&&n&&i(c(e,t,n),d(e,t,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,w),this.document.addEventListener("pointerup",this.onDocPointerDone,w),this.document.addEventListener("pointercancel",this.onDocPointerDone,w),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,w),this.document.removeEventListener("pointerup",this.onDocPointerDone,w),this.document.removeEventListener("pointercancel",this.onDocPointerDone,w),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,e=this.getBox(),i=this.makePixelCrop(e),n=t.clientX-t.startClientX,o=t.clientY-t.startClientY;return i.x=h(t.startCropX+n,0,e.width-i.width),i.y=h(t.startCropY+o,0,e.height-i.height),i}getPointRegion(t,e,i,n){const{evData:o}=this,r=o.clientX-t.x,h=o.clientY-t.y;let a,s;return a=n&&e?"nw"===e||"n"===e||"ne"===e:h<o.startCropY,s=i&&e?"nw"===e||"w"===e||"sw"===e:r<o.startCropX,s?a?"nw":"sw":a?"ne":"se"}resolveMinDimensions(t,e,i=0,n=0){const o=Math.min(i,t.width),r=Math.min(n,t.height);return e&&(o||r)?e>1?o?[o,o/e]:[r*e,r]:r?[r*e,r]:[o,o/e]:[o,r]}resizeCrop(){const{evData:e}=this,{aspect:i=0,maxWidth:n,maxHeight:o}=this.props,r=this.getBox(),[a,s]=this.resolveMinDimensions(r,i,this.props.minWidth,this.props.minHeight);let d=this.makePixelCrop(r);const c=this.getPointRegion(r,e.ord,a,s),w=e.ord||c;let g=e.clientX-e.startClientX,p=e.clientY-e.startClientY;(a&&"nw"===w||"w"===w||"sw"===w)&&(g=Math.min(g,-a)),(s&&"nw"===w||"n"===w||"ne"===w)&&(p=Math.min(p,-s));const u={unit:"px",x:0,y:0,width:0,height:0};"ne"===c?(u.x=e.startCropX,u.width=g,i?(u.height=u.width/i,u.y=e.startCropY-u.height):(u.height=Math.abs(p),u.y=e.startCropY-u.height)):"se"===c?(u.x=e.startCropX,u.y=e.startCropY,u.width=g,u.height=i?u.width/i:p):"sw"===c?(u.x=e.startCropX+g,u.y=e.startCropY,u.width=Math.abs(g),u.height=i?u.width/i:p):"nw"===c&&(u.x=e.startCropX+g,u.width=Math.abs(g),i?(u.height=u.width/i,u.y=e.startCropY-u.height):(u.height=Math.abs(p),u.y=e.startCropY+p));const m=l(u,i,c,r.width,r.height,a,s,n,o);return i||t.xyOrds.indexOf(w)>-1?d=m:t.xOrds.indexOf(w)>-1?(d.x=m.x,d.width=m.width):t.yOrds.indexOf(w)>-1&&(d.y=m.y,d.height=m.height),d.x=h(d.x,0,r.width-d.width),d.y=h(d.y,0,r.height-d.height),d}renderCropSelection(){const{ariaLabels:e=t.defaultProps.ariaLabels,disabled:i,locked:n,renderSelectionAddon:r,ruleOfThirds:h,crop:a}=this.props,s=this.getCropStyle();if(a)return o.a.createElement("div",{style:s,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!i&&!n&&o.a.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},o.a.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),o.a.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),o.a.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),o.a.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"nw"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"n"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"ne"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"e"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"se"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"s"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"sw"),role:"button"}),o.a.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:t=>this.onHandlerKeyDown(t,"w"),role:"button"})),r&&o.a.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:t=>t.stopPropagation()},r(this.state)),h&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),o.a.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){return c({...r,...this.props.crop||{}},t.width,t.height)}render(){const{aspect:t,children:e,circularCrop:i,className:n,crop:r,disabled:h,locked:a,style:s,ruleOfThirds:d}=this.props,{cropIsActive:c,newCropIsBeingDrawn:l}=this.state,w=r?this.renderCropSelection():null,g=((...t)=>t.filter(t=>t&&"string"==typeof t).join(" "))("ReactCrop",n,c&&"ReactCrop--active",h&&"ReactCrop--disabled",a&&"ReactCrop--locked",l&&"ReactCrop--new-crop",r&&t&&"ReactCrop--fixed-aspect",r&&i&&"ReactCrop--circular-crop",r&&d&&"ReactCrop--rule-of-thirds",!this.dragStarted&&r&&!r.width&&!r.height&&"ReactCrop--invisible-crop",i&&"ReactCrop--no-animate");return o.a.createElement("div",{ref:this.componentRef,className:g,style:s},o.a.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},e),r?o.a.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},o.a.createElement("defs",null,o.a.createElement("mask",{id:"hole-"+this.instanceId},o.a.createElement("rect",{width:"100%",height:"100%",fill:"white"}),i?o.a.createElement("ellipse",{cx:`${r.x+r.width/2}${r.unit}`,cy:`${r.y+r.height/2}${r.unit}`,rx:`${r.width/2}${r.unit}`,ry:`${r.height/2}${r.unit}`,fill:"black"}):o.a.createElement("rect",{x:`${r.x}${r.unit}`,y:`${r.y}${r.unit}`,width:`${r.width}${r.unit}`,height:`${r.height}${r.unit}`,fill:"black"}))),o.a.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,w)}};p.xOrds=["e","w"],p.yOrds=["n","s"],p.xyOrds=["nw","ne","se","sw"],p.nudgeStep=1,p.nudgeStepMedium=10,p.nudgeStepLarge=100,p.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let u=p}}]);
//# sourceMappingURL=react-image-crop.7cd32469.js.map